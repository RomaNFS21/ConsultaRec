<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBS Agendamento | Início</title>
    <link rel="stylesheet" href="style.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div class="top-bar"></div>

    <header id="main-header">
        <div class="container">
            <h1 class="logo"><i class="fas fa-heartbeat"></i> Agendamento UBS</h1>
            <nav>
                <ul class="nav-links">
                    <li><a href="#inicio" class="nav-item">Início</a></li>
                    <li><a href="#sobre" class="nav-item">Sobre Nós</a></li>
                    <li id="nav-agendar" style="display:none;"><a href="#agendar" class="nav-item">Agendar</a></li>
                    <li id="nav-disponibilidade" style="display:none;"><a href="#disponibilidade" class="nav-item">Disponibilidade</a></li>
                    <li id="nav-consultas" style="display:none;"><a href="#consultas" class="nav-item">Minha Agenda</a></li>
                    <li id="nav-profile" style="display:none;"><a href="#profile" class="nav-item"><i class="fas fa-user-circle"></i> Meu Perfil</a></li> </ul>
            </nav>
            <div class="auth-controls">
                <span id="user-display" class="user-display" style="display:none;"></span>
                <a href="login.html" id="profile-icon"><i class="fas fa-user-circle fa-2x"></i></a>
                <button id="logout-btn" class="btn btn-logout" style="display:none;"><i class="fas fa-sign-out-alt"></i> Sair</button>
            </div>
        </div>
    </header>

    <div class="main-content container" id="content-area" style="display:none;">

        <section id="agendar" class="content-section user-role-section" style="display: none;">
            <h2><i class="fas fa-calendar-check"></i> Agendar Nova Consulta</h2>
            <div class="form-container luxury-card">
                <form id="agendamento-form">
                    
                    <div class="form-group">
                        <label for="agendamento-especialidade">Especialidade:</label>
                        <select id="agendamento-especialidade" required>
                            <option value="">Selecione a Especialidade</option>
                            </select>
                    </div>

                    <div class="form-group" id="doctor-select-group" style="display: none;">
                        <label for="doctor-email">Médico:</label>
                        <select id="doctor-email" required>
                            <option value="">Selecione o Médico</option>
                        </select>
                    </div>

                    <div id="time-select-group" style="display: none;">
                        <h4 style="margin-top: 20px; color: #3498db;">Selecione a Data e Hora</h4>
                        <p id="availability-message" style="margin-bottom: 15px; color: #e74c3c; font-weight: 500;"></p>
                        
                        <div class="form-group">
                            <label for="data">Data:</label>
                            <input type="date" id="data" required>
                        </div>
                        <div class="form-group">
                            <label for="hora">Hora:</label>
                            <select id="hora" required>
                                <option value="">Selecione o Horário (1h por consulta)</option>
                                </select>
                        </div>
                        
                        <input type="hidden" id="consulta-id"> 
                        <button type="submit" id="form-button" class="btn btn-submit" style="background: #DAA520;">Confirmar Agendamento</button>
                        <button type="button" id="cancelar-edicao" class="btn btn-cancel" style="display: none;">Cancelar Edição</button>
                    </div>
                </form>
            </div>
        </section>


        <section id="disponibilidade" class="content-section admin-role-section" style="display: none;">
            <h2><i class="fas fa-user-md"></i> Minha Disponibilidade de Plantão</h2>
            <p>Defina seus horários de atendimento semanal para que os pacientes possam agendar. (Repetir semanalmente)</p>
            
            <div class="form-container luxury-card" style="margin-bottom: 50px;">
                <form id="availability-form">
                    <h4 style="margin-bottom: 15px; color: #DAA520;">Cadastro de Plantão Semanal</h4>
                    <div id="availability-slots">
                        <p id="no-availability-msg" style="color: #777; font-size: 0.9em;">Nenhum horário de plantão definido.</p>
                    </div>
                    
                    <button type="button" id="add-availability-slot" class="btn" style="background: #4CAF50; margin-top: 10px;"><i class="fas fa-plus-circle"></i> Adicionar Horário</button>
                    <button type="submit" id="save-availability-btn" class="btn btn-submit" style="background: #DAA520; margin-top: 20px;">Salvar Disponibilidade Semanal</button>
                </form>
            </div>

            <div id="weekly-schedule-area">
                <h2><i class="fas fa-calendar-alt"></i> Minha Agenda da Semana</h2>
                <p style="margin-bottom: 20px; color: #555;">Visualize seus agendamentos e horários livres nos próximos 7 dias.</p>
                <div id="weekly-schedule-grid" class="luxury-card weekly-grid">
                    </div>
                <p id="weekly-schedule-loading" style="text-align: center; margin-top: 20px; display: none;">Carregando...</p>
            </div>
        </section>
        
        <section id="profile" class="content-section" style="display: none;">
            <h2><i class="fas fa-user-edit"></i> Meu Perfil</h2>
            <div class="form-container luxury-card">
                <form id="profile-form">
                    <div class="form-group">
                        <label>Email (Não Editável):</label>
                        <input type="email" id="profile-email" disabled>
                    </div>
                    <div class="form-group">
                        <label>Seu Papel:</label>
                        <input type="text" id="profile-role-display" disabled style="font-weight: 600;">
                    </div>
                    <div class="form-group">
                        <label for="profile-name">Nome Completo:</label>
                        <input type="text" id="profile-name" required>
                    </div>
                    <div class="form-group">
                        <label for="profile-phone">Telefone:</label>
                        <input type="tel" id="profile-phone">
                    </div>
                    <div class="form-group">
                        <label for="profile-address">Endereço:</label>
                        <input type="text" id="profile-address">
                    </div>
                    
                    <div id="profile-doctor-info" style="border: 1px dashed #3498db; padding: 15px; margin-bottom: 20px; border-radius: 6px; display:none;">
                        <h4 style="margin-top: 5px; margin-bottom: 10px; color: #3498db; font-size: 1em;">Especialidades Registradas:</h4>
                        <p id="profile-specialties-display" style="font-weight: 500;"></p>
                    </div>


                    <button type="submit" class="btn btn-submit" style="background: #4CAF50;">Salvar Alterações</button>
                    <p id="profile-msg" class="error-msg" style="text-align: center; margin-top: 15px;"></p>
                </form>
            </div>
        </section>


        <section id="consultas" class="content-section">
            <h2><i class="fas fa-list-alt"></i> Minha Agenda</h2>
            <div class="list-container luxury-card">
                <div class="table-responsive">
                    <table id="consultas-tabela" class="data-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Hora</th>
                                <th>Especialidade</th>
                                <th id="table-header-other-party">Médico/Paciente</th>
                                <th id="table-header-status">Status</th> <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
                <div id="no-consultas" style="text-align: center; margin-top: 20px; display: block;">
                    <p class="empty-message"><i class="fas fa-check-circle"></i> Não há agendamentos pendentes.</p>
                </div>
            </div>
        </section>
        
        <section id="contato" class="content-section">
            <div class="container contact-info">
                <h3><i class="fas fa-map-marker-alt"></i> Suporte UBS</h3>
                <div class="info-blocks">
                    <div class="info-block luxury-card">
                        <i class="fas fa-phone fa-2x"></i><h4>Fale Conosco</h4><p>(81) 3419-6700</p>
                    </div>
                    <div class="info-block luxury-card">
                        <i class="fas fa-envelope fa-2x"></i><h4>Suporte Digital</h4><p>www.cesar.school.com</p>
                    </div>
                    <div class="info-block luxury-card">
                        <i class="fas fa-home fa-2x"></i><h4>Endereço Principal</h4><p>Avenida, Cais do Apolo, 77, Recife - PE, 50030-220</p>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Agendamento UBS - Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
